# AI 图片“图意”命名器 · v1.1.0

AI 图片“图意”命名器是一款面向 Markdown 图文的 LLM 命名/搬运工具，支持批量生成图意、翻译/归纳上下文，并自动下载、重命名与回写图片链接。

本发行包提供 Markdown 图片命名/搬运的一体化工具集，包含批量 GUI、命令行核心脚本以及可选的图片本地化辅助脚本。V1 新增“翻译 / 归纳”上下文助手；v1.1.0 聚焦四项升级：语言可控、图意导入、SCI 论文图片策略、粘贴大段语境后再生成。

## v1 ➜ v1.1.0 这次新增了什么

- 语言可控（UI 与输出）
   - 顶部可切换界面语言（中/英）；新增“图意输出语言”选项：自动/中文/英文，统一命名风格。
- 图意导入（把你的既有描述变成起点）
   - 单图审核时可直接输入/粘贴你已有的“图意”文本作为种子，再让 LLM 在此基础上优化与适配模板。
- SCI 策略（面向论文图片的图注强化）
   - 新增命名策略「SCI」，对 Figure/图注等线索做专门提炼，优先突出变量、方法、实验要点，适合学术场景。
- 粘贴大段相关内容后生成
   - 在单图审核面板中支持粘贴较长的上下文/段落作为“语境补充”，点击“生成”即可结合语境产出更贴切的图意。

提示：以上四项可自由组合使用。例如：选择「SCI」策略 + 输出语言设为英文 + 粘贴论文段落，再点击“生成”，即可得到符合 SCI 写作风格的英文命名。

## 目录结构

```text
release_bundle/
├─ README.md                  当前说明
├─ requirements.txt           依赖列表
└─ tool/
   ├─ ai_image_intent_namer.py          核心 CLI / 业务逻辑
   ├─ ai_image_intent_namer_batch_gui.py 批量 GUI（推荐入口）
   ├─ ai_image_intent_namer_gui.py       旧版 GUI（可选）
   └─ md_image_localizer.py              可选：Markdown 图片本地化脚本
```

## 运行环境

- Python 3.9 及以上
- Tkinter（Python 自带，如为精简发行版需单独安装）
- 依赖：`requests`, `pillow`

安装依赖：

```powershell
pip install -r requirements.txt
```

## 快速开始

1. 解压本目录，进入 `release_bundle`。
2. 启动批量 GUI：

   ```powershell
   python tool/ai_image_intent_namer_batch_gui.py
   ```

3. 在 GUI 中：

   - 添加需要处理的 Markdown 文件。
   - 在顶部“AI 参数”区填写 Base URL / API Key / 模型，或点击“API/模型配置...”配置并保存多套档案。
   - 可在单图对话框中使用“翻译 / 归纳”按钮，快速获得上文/下文的译文或摘要。
   - 选择“批量预览（串行）”或“立即应用”即可批量生成候选并写回文档。

## v1.1.0 更新亮点（摘要）

- 语言：界面语言切换（中/英）；图意输出语言（自动/中文/英文）。
- 图意导入：支持把你已有的图意文本作为起点，便于统一风格与批量复用。
- SCI 策略：新增面向论文图片的命名策略，突出 caption 要点。
- 语境增强：支持粘贴较长相关内容后再生成，更贴合原文上下文。
- 其他：清理无关产物，微调依赖与文档。

## v1.0.0（V1）版本亮点

- **翻译 / 归纳助手**：在单图审核对话框顶部新增两个按钮，支持独立的 Base URL / API Key / 模型 / Prompt 配置，返回结果直接展示在弹窗中。
- **兼容多厂商输出**：`call_openai_chat` 新增 `expect_json` 开关与 `flatten_text` 处理，完美兼容 SiliconFlow 等返回 `output_text` 数组的模型，避免翻译结果为空。
- **稳定性回归**：核心脚本恢复为干净的 UTF-8 源文件，所有 GUI 调用均已验证可用。

## 交付物

此 README 所在目录可视为发行包参考结构；可直接压缩整个 `release_bundle/` 目录。也可前往 GitHub Releases 页面下载对应版本的压缩包（若提供）。

> 建议将 `release_bundle` 打包后进行数字签名或校验，以便后续版本更新时能够快速比对差异。
